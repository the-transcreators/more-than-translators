<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>A story about a last-minute rush - THE TRANSCREATORS | MORE THAN TRANSLATORS | LOCALIZATION COPYWRITERS | HOW AND WHY TO USE BETTER ENGLISH</title><meta name="description" content="I'd like to tell you a little story from the world of conventional translation. It's rather a sad little story. The saddest part is that it plays out week after week. The happiest part is that it doesn't have to&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://the-transcreators.github.io/more-than-translators/last-minute-rush.html"><link rel="alternate" type="application/atom+xml" href="https://the-transcreators.github.io/more-than-translators/feed.xml"><link rel="alternate" type="application/json" href="https://the-transcreators.github.io/more-than-translators/feed.json"><meta property="og:title" content="A story about a last-minute rush"><meta property="og:image" content="https://the-transcreators.github.io/more-than-translators/media/posts/8/rush_720-95pc.webp"><meta property="og:image:width" content="1280"><meta property="og:image:height" content="720"><meta property="og:site_name" content="THE TRANSCREATORS | MORE THAN TRANSLATORS | LOCALIZATION COPYWRITERS | HOW AND WHY TO USE BETTER ENGLISH"><meta property="og:description" content="I'd like to tell you a little story from the world of conventional translation. It's rather a sad little story. The saddest part is that it plays out week after week. The happiest part is that it doesn't have to&hellip;"><meta property="og:url" content="https://the-transcreators.github.io/more-than-translators/last-minute-rush.html"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://the-transcreators.github.io/more-than-translators/media/website/favicon-t-192-2.png" type="image/png"><link rel="stylesheet" href="https://the-transcreators.github.io/more-than-translators/assets/css/fontawesome-all.min.css?v=bbcde81f26378440dac4c3d195714389"><link rel="stylesheet" href="https://the-transcreators.github.io/more-than-translators/assets/css/style.css?v=70c7372e18a0b64cddbea39172baaf8b"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://the-transcreators.github.io/more-than-translators/last-minute-rush.html"},"headline":"A story about a last-minute rush","datePublished":"2022-06-10T00:00","dateModified":"2022-08-11T13:23","image":{"@type":"ImageObject","url":"https://the-transcreators.github.io/more-than-translators/media/posts/8/rush_720-95pc.webp","height":720,"width":1280},"description":"I'd like to tell you a little story from the world of conventional translation. It's rather a sad little story. The saddest part is that it plays out week after week. The happiest part is that it doesn't have to&hellip;","author":{"@type":"Person","name":"Warren","url":"https://the-transcreators.github.io/more-than-translators/authors/author2/"},"publisher":{"@type":"Organization","name":"Mark"}}</script></head><body class="is-preload"><div id="wrapper"><div id="main"><div class="inner"><header id="header"><a class="logo" href="https://the-transcreators.github.io/more-than-translators/"><strong>THE TRANSCREATORS | MORE THAN TRANSLATORS | LOCALIZATION COPYWRITERS | HOW AND WHY TO USE BETTER ENGLISH</strong></a></header><article class="post"><header class="main post__header"><h1>A story about a last-minute rush</h1></header><figure class="image main normal"><img src="https://the-transcreators.github.io/more-than-translators/media/posts/8/rush_720-95pc.webp" srcset="https://the-transcreators.github.io/more-than-translators/media/posts/8/responsive/rush_720-95pc-xs.webp 300w, https://the-transcreators.github.io/more-than-translators/media/posts/8/responsive/rush_720-95pc-sm.webp 480w, https://the-transcreators.github.io/more-than-translators/media/posts/8/responsive/rush_720-95pc-md.webp 768w, https://the-transcreators.github.io/more-than-translators/media/posts/8/responsive/rush_720-95pc-lg.webp 1024w, https://the-transcreators.github.io/more-than-translators/media/posts/8/responsive/rush_720-95pc-xl.webp 1360w, https://the-transcreators.github.io/more-than-translators/media/posts/8/responsive/rush_720-95pc-xxl.webp 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="lazy" height="720" width="1280" alt=""></figure><div class="post__inner post__entry"><p>I'd like to tell you a little story from the world of conventional translation. It's rather a sad little story. The saddest part is that it plays out week after week. The happiest part is that it doesn't have to be this way.</p><p>A copywriter in a marketing <span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">department</span><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);"> </span><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">somewhere in the world finally finishes a piece of work in a last-minute burst of frantic action. It's last thing on Friday. A series of deadlines has already been missed, and the latest one <em>must </em>be met: the original copy <em>and </em>the translation <em>have </em>to be finished by Monday. At the latest!</span></p><p>Can you see where this is going? Stay with it... maybe it'll be worse than you think.</p><p>The original took many days of writing and rewriting, but now it is finished and it's only a couple of hundred words. So it's simply a matter of finding someone to quickly rattle it off in a different language. What could be difficult about that? After all, the real work has already been done.</p><p>The copywriter calls a translation agency and is told they will have to pay a surcharge because it's a rush job. That's a bit annoying, but there's no alternative. The copywriter goes off to enjoy their weekend. Work phone off, of course. No work emails either. It was a hard week.</p><p>A translator somewhere else in the world is suddenly no longer looking forward to their weekend. They didn't really want to accept the job, but the agency insisted, and refusing work even once can mean that an agency never calls again.</p><p>At this point, neither the agency nor the translator knows that the copywriter didn't have time to properly read through the source text from beginning to end to make sure that it's clear, unambiguous and has a thread of logic running through it. Even if they had, this would still not be the ideal way to do things.</p><p>The translator gets that creeping cold feeling at the beginning of the second paragraph. There doesn't seem to be any connection to the previous paragraph. And in the third, the copywriter has used a slightly different term for something that is probably the same thing that was mentioned in the first paragraph. Or is it a different thing? Was the writer trying to avoid repetition? Or is it a different thing? (Pun intended.)</p><p>So it goes the whole weekend. Even during the working week, the translator would be reluctant to ask questions via the agency. The incentive is to quietly produce the work with no fuss. Now there's no way at all to ask for clarification anyway. And the deadline is looming. So the translator has to guess and hope.</p><p>The translation is delivered on Monday. Nobody reads it. Both the translation and the original are immediately published. The deadline is met. Then these bad things happen:</p><ul style="list-style-type: square;"><li>The copywriter gets grief from their manager for having agreed to pay the agency surcharge</li><li>A business partner from abroad complains to the marketing manager that the translation doesn't make sense</li><li>The copywriter gets grief from their manager because the translation not only cost more, but it is wrong</li><li>The agency gets grief from the copywriter because the translation was wrong</li><li>The translator gets grief from the agency because the translation was wrong</li><li>The translator's life partner gets grief from the translator because the translator has to take it out on someone</li><li>A prospective customer reads the published original piece, gets a bit confused, and stops reading</li><li>A prospective customer reads the published translation, gets very confused, and stops reading</li><li>Someone in another department of the company complains that the original isn't very clear</li><li>A lot effort is expended reworking the original and trying not to think about the translation</li><li>In the end, after much grief-giving and emailing, the original is finished... again</li><li>The translation is patched up a little here and there, but mostly left as it was, and nobody really notices how unclear it is</li></ul><p>So nobody's happy. The prospective customers are the least <em>un</em>happy, because their simple solution to the problem is the simplest solution of all. The prospective customers abroad who depend on the translation are very likely to never know what the company was trying to express. The company itself is very likely to never know how many customers it has missed.</p><p>There is, of course, a much better way. I don't need to spell it out, I'm sure, but it could also involve a shift of focus from translation to transcreation. If it does, then even more time needs to be allowed. The benefits are well worth it though. And everybody will be happy, even the prospective customers.</p></div><footer class="post__inner post__footer"><div class="post__bio"><div><h3><a href="https://the-transcreators.github.io/more-than-translators/authors/author2/" class="invert" rel="author">Warren</a></h3><p>I am a freelance translator with well over 20 years experience. My mother tongue is English. Translation is much more than a nuts-and-bolts activity for me – it&#x27;s a passion. That&#x27;s why I&#x27;m moving more and more in the direction of transcreation. If you have a passion for getting your message across effectively, then we are already on the same page. Email me at: the.transcreators@proton.me</p></div></div></footer></article></div></div><div id="sidebar"><div class="inner"><nav id="menu"><header class="major"><h2>Menu</h2></header><ul><li><a href="https://the-transcreators.github.io/more-than-translators/" target="_self">ALL POSTS</a></li><li><a href="https://the-transcreators.github.io/more-than-translators/authors/author1/" target="_self">POSTS BY MARK</a></li><li><a href="https://the-transcreators.github.io/more-than-translators/authors/author2/" target="_self">POSTS BY WARREN</a></li><li><a href="https://the-transcreators.github.io/more-than-translators/website-localization-as-easy-as-it-gets.html" target="_self">WEBSITE LOCALIZATION AS EASY AS IT GETS</a></li></ul></nav><section><header class="major"><h2>Get in touch</h2></header><p>Email us at:<br><br><a href="mailto:author1@email-address-tba.com">the.transcreators@proton.me</a><br><br></p></section><footer id="footer"><p class="copyright">Last updated: 12 Dec 2022</p></footer></div></div></div><script src="https://the-transcreators.github.io/more-than-translators/assets/js/jquery.min.js?v=7c14a783dfeb3d238ccd3edd840d82ee"></script><script src="https://the-transcreators.github.io/more-than-translators/assets/js/browser.min.js?v=c07298dd19048a8a69ad97e754dfe8d0"></script><script src="https://the-transcreators.github.io/more-than-translators/assets/js/breakpoints.min.js?v=81a479eb099e3b187613943b085923b8"></script><script src="https://the-transcreators.github.io/more-than-translators/assets/js/util.min.js?v=cbdaf7c20ac2883c77ae23acfbabd47e"></script><script src="https://the-transcreators.github.io/more-than-translators/assets/js/main.min.js?v=448f4c9d4b4c374766a1cb76c3d88048"></script><script>var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};</script><div class="pcb" data-behaviour="link" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" class="pcb__title">Those pesky cookies</div><div id="pcb-txt" class="pcb__txt">Just click on "Reject all non-essential" and you will still be able to view this blog perfectly well. The transcreators don't use cookies directly, but maybe we do indirectly because other parties set them. If for some crazy reason you want to opt in to non-essential cookies, then click on "Manage preferences". Possible uses of cookies are to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality. <a href="#not-specified">More details...</a></div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--link pcb__btn--configure" aria-haspopup="dialog">Manage preferences</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject all non-essential</button> <button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button></div></div></div><div class="pcb__popup" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-popup-title"><div class="pcb__popup__wrapper"><div class="pcb__inner pcb__popup__inner"><div class="pcb__popup__heading"><div id="pcb-popup-title" role="heading" class="pcb__title">Cookie settings</div><button class="pcb__popup__close" aria-label="Close"></button></div><div class="pcb__popup__content"><div class="pcb__txt pcb__popup__txt">We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept all", you consent to our use of cookies. <a href="#not-specified">More details...</a></div><ul class="pcb__groups"><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Essential</summary></details><div class="pcb__popup__switch is-checked"><input type="checkbox" data-group-name="" id="pcb-group-0" checked="checked"> <label for="pcb-group-0">Essential</label></div></li><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Functionality</summary></details><div class="pcb__popup__switch"><input type="checkbox" data-group-name="functions" id="functions-cookies"> <label for="functions-cookies">Functionality</label></div></li><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Analytical</summary></details><div class="pcb__popup__switch"><input type="checkbox" data-group-name="analytics" id="analytics-cookies"> <label for="analytics-cookies">Analytical</label></div></li><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Marketing</summary></details><div class="pcb__popup__switch"><input type="checkbox" data-group-name="marketing" id="marketing-cookies"> <label for="marketing-cookies">Marketing</label></div></li></ul></div><div class="pcb__buttons pcb__popup__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject all non-essential</button> <button type="button" class="pcb__btn pcb__btn--save">Save settings</button></div></div></div></div><div class="pcb__overlay" aria-hidden="true"></div></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('🍪 Config not found, or configuration expired');
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('🍪 Config founded');
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('🍪 Allowed group: ' + allowedGroup);
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('🍪 Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('🍪 Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>